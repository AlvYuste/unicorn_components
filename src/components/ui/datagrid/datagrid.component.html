<nts-datagrid-header [columns]="columns"> </nts-datagrid-header>
<nts-datagrid-row
    *ngFor="let row of dataView | fillMap : dataSource | order : orderKey | paginate : pageable ? page : -1 : pageSize ; let i = index;"
    [selectable]="selectable"
    [box]="true"
    [selected]="row.selected"
    [highlight]="highlightRow"
    (selectedChange)="selectItem(row.id, $event)"
    (click)="rowClick.emit({i: i, row: row})"
>
    <ng-container *ngIf="!customRow">
        <nts-datagrid-cell
            *ngFor="let column of columns; let j = index;"
            [width]="column.width"
            [highlight]="column.highlightCell === undefined ? highlightCell : column.highlightCell"
            [style.text-align]="column.formatOptions?.align || 'left'"
            [customCell]="column.customCell"
            [clickPropagation]="column.clickPropagation"
            [value]="row[column.field]"
            [format]="column.format"
            [options]="column.formatOptions"
            [context]="{$implicit: row, i: i, j: j, row: row, column: column, cell: row[column.field]}"
        >
        </nts-datagrid-cell>
    </ng-container>
    <ng-container *ngIf="customRow">
        <template [ngTemplateOutlet]="customRow" [ngOutletContext]="{ $implicit: row, i: i }"> </template>
    </ng-container>
</nts-datagrid-row>

<nts-separator></nts-separator>

<nts-paginator
    *ngIf="pageable && pageSize < (local ? dataView.length : totalItems)"
    [totalElements]="local ? dataView.length : totalItems"
    [pageSize]="pageSize"
    [(selected)]="page"
>
</nts-paginator>
